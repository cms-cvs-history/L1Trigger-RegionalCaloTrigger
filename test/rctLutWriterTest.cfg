process WRITELUTS = 
{
	untracked PSet maxEvents = {untracked int32 input = 1}

#include "Configuration/ReleaseValidation/data/Services.cff"
#    include "Configuration/StandardSequences/data/FakeConditions.cff"
#    untracked PSet options = {
#        include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
#        untracked bool makeTriggerResults = true
#    }

#  service = TFileService { 
#    string fileName = "rct.root"
#  }

  source = EmptySource {}

// copy and paste from pascal's first e-mail (for new ecaltrigprimproducer 
// version, using TPG.txt instead of two separate files)

# ecal tpg params
    es_module = EcalTrigPrimESProducer {
      #untracked string DatabaseFile = "TPG.txt"
      untracked string DatabaseFile = "TPG_RCT_identity.txt"
    }

# Sources of records
    es_source tpparams6 = EmptyESSource {
      string recordName = "EcalTPGLutGroupRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
    es_source tpparams7 = EmptyESSource {
      string recordName = "EcalTPGLutIdMapRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
    es_source tpparams12 = EmptyESSource {
      string recordName = "EcalTPGPhysicsConstRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }

#include "FWCore/MessageService/data/MessageLogger.cfi"

# configuration without or with egamma ecal scale factors from ORCA
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTORCAConfig.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig-HCALGREN.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig-ECALGREN.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig-GREN.cff" #old!

es_source l1RctParamsRecords = EmptyESSource {
	string recordName = "L1RCTParametersRcd"
	vuint32 firstValid = { 1 }
	bool iovIsRunNotTime = true
}

es_module = RCTConfigProducers {
	double eGammaLSB = 1.0
	double jetMETLSB = 1.0
	double eMinForFGCut = 999.
	double eMaxForFGCut = -999.
	double hOeCut = 999.
	double eMinForHoECut = 999.
	double eMaxForHoECut = -999.
	double hMinForHoECut = 999.
	double eActivityCut = 999.
	double hActivityCut = 999.
	uint32 eicIsolationThreshold = 0
	uint32 jscQuietThresholdBarrel = 3
	uint32 jscQuietThresholdEndcap = 3
	bool noiseVetoHB = false
	bool noiseVetoHEplus = false
	bool noiseVetoHEminus = false
	vdouble eGammaECalScaleFactors = {
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1.
	}
	vdouble eGammaHCalScaleFactors = {
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1.
	}

	vdouble jetMETECalScaleFactors = {
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1.
	}
	vdouble jetMETHCalScaleFactors = {
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,
		1., 1., 1., 1., 1., 1., 1., 1.
	}
}

# RCT channel mask
es_source l1RctMaskRcds = EmptyESSource {
      string recordName = "L1RCTChannelMaskRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
}

include "L1Trigger/RegionalCaloTrigger/data/L1RCTTestAnalyzer.cfi"
replace L1RCTTestAnalyzer.showRegionSums = false

include "SimCalorimetry/HcalTrigPrimProducers/data/hcaltpdigi.cff"
// below file is identity file used for GREN
replace CaloTPGTranscoder.hcalLUT2 = "CalibCalorimetry/CaloTPG/data/TPGcalcDecompress2Identity.txt"

include "L1TriggerConfig/L1ScalesProducers/data/L1CaloScalesConfig.cff"
replace l1CaloScales.L1CaloEmEtScaleLSB = 1.0

    module rctLutWriter = L1RCTLutWriter
    {}

    path p = {rctLutWriter}

    schedule = {p}

}
