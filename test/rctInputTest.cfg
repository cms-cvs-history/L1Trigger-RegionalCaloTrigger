process TEST = 
{
	untracked PSet maxEvents = {untracked int32 input = 64}
#	untracked PSet maxEvents = {untracked int32 input = 2}

#include "Configuration/ReleaseValidation/data/Services.cff"
#    include "Configuration/StandardSequences/data/FakeConditions.cff"
#    untracked PSet options = {
#        include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
#        untracked bool makeTriggerResults = true
#    }

  service = TFileService { 
    string fileName = "rct.root"
  }

  source = EmptySource {}

// copy and paste from pascal's first e-mail (for new ecaltrigprimproducer 
// version, using TPG.txt instead of two separate files)

# ecal tpg params
    es_module = EcalTrigPrimESProducer {
      untracked string DatabaseFile = "TPG.txt"
      #untracked string DatabaseFile = "TPG_RCT_internal.txt"
      #untracked string DatabaseFileEB = "TPG_EB.txt"
      #untracked string DatabaseFileEE = "TPG_EE.txt"
    }

# Sources of records
    es_source tpparams6 = EmptyESSource {
      string recordName = "EcalTPGLutGroupRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
    es_source tpparams7 = EmptyESSource {
      string recordName = "EcalTPGLutIdMapRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
    es_source tpparams12 = EmptyESSource {
      string recordName = "EcalTPGPhysicsConstRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }

/*
// copy and paste from pascal's second e-mail: only for older versions
# ecal tpg params
    es_module = EcalTrigPrimESProducer {
      untracked string DatabaseFileEB = "TPG_EB.txt"
      untracked string DatabaseFileEE = "TPG_EE.txt"
    }

# Sources of records
    es_source tpparams6 = EmptyESSource {
      string recordName = "EcalTPGLutGroupRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
    es_source tpparams7 = EmptyESSource {
      string recordName = "EcalTPGLutIdMapRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
    es_source tpparams12 = EmptyESSource {
      string recordName = "EcalTPGPhysicsConstRcd"
      vuint32 firstValid = { 1 }
      bool iovIsRunNotTime = true
    }
*/

include "FWCore/MessageService/data/MessageLogger.cfi"

# configuration without or with egamma ecal scale factors from ORCA
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig.cff"
include "L1TriggerConfig/RCTConfigProducers/data/L1RCTORCAConfig.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig-GREN.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig-HCALGREN.cff"
#include "L1TriggerConfig/RCTConfigProducers/data/L1RCTConfig-ECALGREN.cff"

include "L1Trigger/RegionalCaloTrigger/data/L1RCTTestAnalyzer.cfi"
replace L1RCTTestAnalyzer.showRegionSums = false
replace L1RCTTestAnalyzer.ecalDigisLabel = rctInput
replace L1RCTTestAnalyzer.hcalDigisLabel = rctInput

#include "Configuration/StandardSequences/data/L1Emulator.cff"
include "L1Trigger/RegionalCaloTrigger/data/rctDigis.cfi"
replace rctDigis.ecalDigisLabel = rctInput
replace rctDigis.hcalDigisLabel = rctInput
#replace rctDigis.preSamples = 2
#replace rctDigis.postSamples = 2
#replace rctDigis.useHcalCosmicTiming = true
#replace rctDigis.useEcalCosmicTiming = true

include "SimCalorimetry/HcalTrigPrimProducers/data/hcaltpdigi.cff"
include "L1TriggerConfig/L1ScalesProducers/data/L1CaloScalesConfig.cff"

    module rctInput = RctInputTextToDigi
    {
	FileInPath inputFile = "L1Trigger/TextToDigi/test/data/rctTestInputFileElec.txt"
#	FileInPath inputFile = "L1Trigger/RegionalCaloTrigger/test/rctSaveTest.txt"
    }

    path input = {rctInput}
    path p4 = {rctDigis, L1RCTTestAnalyzer}
#    path p4 = {L1Emulator}

   # Event output
#include "Configuration/EventContent/data/EventContent.cff"
#   module FEVT = PoolOutputModule 
#   { 
#     	using FEVTSIMEventContent
#	untracked string fileName = "rctInputTest.root"
#    	untracked PSet dataset ={	
#        	untracked string dataTier = "GEN-SIM-DIGI-RECO"
#    		}
#   }

#   endpath outpath = {FEVT}


#   schedule = {input,p4,outpath}
    schedule = {input, p4}

}
